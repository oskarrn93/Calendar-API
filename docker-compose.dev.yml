version: '3'
services:
  api:
    image: node:12
    container_name: api
    build: .
    network_mode: "host"
    env_file:
      - .env
      - config.env
    environment:
      - PORT=8001
      - NODE_ENV=development
    volumes:
      - ./node_modules/:/node_modules/
      - ./package.json:/package.json
      - ./package-lock.json:/package-lock.json
      - ./.babelrc:/.babelrc
      - ./.env:/.env
      - ./config.env:/config.env
      - ./src/index.js:/index.js
    ports:
      - "8001:8001"
    command: bash -c "npm install && npm run dev:start"
